alias: test-abtf-ssd-pytorch
uid: 91bfc4333b054c21

automation_alias: script
automation_uid: 5b4e0237da074764

category: Tests

tags:
- test
- abtf
- ssd
- pytorch
- ssd-pytorch

input_mapping:
  input: CM_INPUT_IMAGE
  output: CM_OUTPUT_IMAGE
  export_model: CM_ABTF_EXPORT_MODEL_TO_ONNX

deps:

- tags: detect,os

- tags: get,python3
  names:
  - python
  - python3

- tags: get,generic-python-lib,_numpy
- tags: get,generic-python-lib,_package.Pillow
- tags: get,generic-python-lib,_onnx
- tags: get,generic-python-lib,_torch
  names:
  - torch
- tags: get,generic-python-lib,_torchvision
- tags: get,generic-python-lib,_opencv-python


- tags: get,ml-model,abtf-ssd-pytorch
  names:
  - ml-model

- tags: get,git,repo,_repo.https://github.com/mlcommons/abtf-ssd-pytorch
  names:
  - abtf-ssd-pytorch-git-repo
  env:
    CM_GIT_CHECKOUT_PATH_ENV_NAME: CM_ABTF_SSD_PYTORCH
    CM_GIT_BRANCH: <<<CM_ABTF_SSD_PYTORCH_BRANCH>>>
  extra_cache_tags: abtf,ssd,pytorch



variations:
  cpu:
    group: device
    default: True
    env:
      CM_DEVICE: cpu

  cuda:
    group:
      device
    env:
      CM_DEVICE: cuda


  coco:
    group: dataset
    default: True
    env: 
      CM_ABTF_DATASET: coco
      CM_ABTF_SSD_PYTORCH_BRANCH: main

  cognata:
    group: dataset
    script_name: run-cognata
    env: 
      CM_ABTF_DATASET: Cognata
      CM_ABTF_SSD_PYTORCH_BRANCH: cognata
      CM_ABTF_ML_MODEL_CONFIG: baseline_8MP

input_description:
  input: 
    desc: input image (png)
  output: 
    desc: output image (png)
  export_model: 
    desc: ONNX model name to be exported from PyTorch

docker:
  skip_run_cmd: 'no'
  all_gpus: 'yes'
  input_paths:
    - input
    - output
    - export_model
  skip_input_for_fake_run:
    - input
    - output
    - export_model
