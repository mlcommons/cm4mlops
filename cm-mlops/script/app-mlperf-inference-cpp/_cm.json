{
  "alias": "app-mlperf-inference-cpp",
  "automation_alias": "script",
  "automation_uid": "5b4e0237da074764",
  "input_mapping": {
    "mode": "CM_LOADGEN_MODE",
    "scenario": "CM_LOADGEN_SCENARIO",
    "output_dir": "CM_MLC_OUTPUT_DIR",
    "mlperf_conf": "CM_MLC_MLPERF_CONF",
    "user_conf": "CM_MLC_USER_CONF",
    "count": "CM_LOADGEN_QUERY_COUNT",
    "max_batchsize": "CM_LOADGEN_MAX_BATCHSIZE",
    "performance_sample_count": "CM_LOADGEN_PERFORMANCE_SAMPLE_COUNT"
  },
  "deps": [
    {
      "tags": "set,echo-off,win"
    },
    {
      "tags": "detect,os,info"
    },
    {
      "tags": "get,sys-utils-cm"
    },
    {
      "names": [
        "loadgen"
      ],
      "tags": "get,mlcommons,inference,loadgen"
    },
    {
      "names": [
        "inference-src"
      ],
      "tags": "get,mlcommons,inference,src"
    },
    {
      "tags": "get,dataset,preprocessed,imagenet,_NCHW",
      "enable_if_env": {
        "CM_MODEL": [ "resnet50" ]
      }
    },
    {
      "tags": "get,ml-model-onnx,resnet50",
      "enable_if_env": {
        "CM_MODEL": [ "resnet50" ]
      }
    },
    {
      "tags": "get,dataset,preprocessed,openimages,_NCHW",
      "enable_if_env": {
        "CM_MODEL": [ "retinanet" ]
      }
    },
    {
      "tags": "get,ml-model,retinanet,_onnx",
      "enable_if_env": {
        "CM_MODEL": [ "retinanet" ]
      }
    },
    {
      "tags": "get,lib,onnxruntime,lang-cpp",
      "enable_if_env": {
        "CM_BACKEND": [ "onnxruntime" ]
      }
    }
  ],
  "env": {
    "CM_BATCH_COUNT": "1",
    "CM_BATCH_SIZE": "1"
  },
  "post_deps": [
    {
      "names": [ "compiler" ],
      "tags": "compile,program"
    },
    {
      "names": [ "runner" ],
      "tags": "benchmark,program"
    }
  ],
  "tags": [
    "app",
    "image-classification",
    "vision",
    "inference",
    "mlperf",
    "cpp"
  ],
  "uid": "879ed32e47074033",
  "variations": {
    "resnet50": {
      "env": {
        "CM_MODEL": "resnet50"
      }
    },
    "retinanet": {
      "env": {
        "CM_MODEL": "retinanet"
      }
    },
    "onnxruntime": {
      "env": {
        "CM_BACKEND": "onnxruntime"
      }
    },
    "tf": {
      "env": {
        "CM_BACKEND": "tf"
      }
    },
    "tflite": {
      "env": {
        "CM_BACKEND": "tflite"
      }
    },
    "tvm-onnx": {
      "env": {
        "CM_BACKEND": "tvm-onnx"
      }
    },
    "pytorch": {
      "env": {
        "CM_BACKEND": "pytorch"
      }
    }
  }
}
